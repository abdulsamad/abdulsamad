---
const isDev = import.meta.env.DEV;

const PUBLIC_POSTHOG_KEY = import.meta.env.PUBLIC_POSTHOG_KEY;
const PUBLIC_POSTHOG_HOST = import.meta.env.PUBLIC_POSTHOG_HOST;
---

<script define:vars={{ isDev, PUBLIC_POSTHOG_KEY, PUBLIC_POSTHOG_HOST }} is:inline>
	// prettier-ignore
	!function(t,e){var o,s,i,n;e.__SV||(window.posthog=e,e._i=[],e.init=function(r,a,p){function u(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(i=t.createElement("script")).type="text/javascript",i.crossOrigin="anonymous",i.async=!0,i.src=a.api_host+"/static/array.js",(n=t.getElementsByTagName("script")[0]).parentNode.insertBefore(i,n);var c=e;for(void 0!==p?c=e[p]=[]:p="posthog",c.people=c.people||[],c.toString=function(t){var e="posthog";return"posthog"!==p&&(e+="."+p),t||(e+=" (stub)"),e},c.people.toString=function(){return c.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys getNextSurveyStep onSessionId".split(" "),s=0;s<o.length;s++)u(c,o[s]);e._i.push([r,a,p])},e.__SV=1)}(document,window.posthog||[]),isDev||posthog.init(PUBLIC_POSTHOG_KEY,{api_host:PUBLIC_POSTHOG_HOST,ui_host:"https://us.posthog.com",default:"2025-05-24",person_profiles:"always",loaded:t=>{const e=document.querySelector(".did").innerHTML;t.get_distinct_id()&&t.get_distinct_id()!==e&&t.identify(e)}}),isDev&&posthog.init("fake_token",{debug:!0,verbose:!0,autocapture:!1,loaded:function(t){t.opt_out_capturing(),t.set_config({disable_session_recording:!0})},bootstrap:{featureFlags:{}}});
</script>
